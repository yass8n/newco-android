# newco-android

# Basic flow
This is kind of the way it ended up. I don't know if it's best. It might need some refactoring soon

## AppController
The app controller contains code that is used throughout the acitivities. Such as initiating the sidebar, and keeping track of the current API url, it is also the first thing to be run in the program. So it's used for initializing all singletons

## RestClient
The RestClient class is a singleton that contains the Retrofit object.

## RestAPI
The RestAPI class is where the paths to our API reside.
To use it, simple call the RestClient singleton, use the get function, and call your API path
ex.) RestClient.getInstance().get().listSessions();

## SessionData, UserData
All network operations that use the RestClient reside in these files. This is to make it easy to figure out where we're building data.

## Models: Sessions, users, speakers, etc
Retrofit uses Gson to automatically turn json code into Java objects. These are our objects.

# Making an API request
There is some hackiness to making an API request. I don't know if I like it, it's just how it ended up and may need some refactoring in the future.

For example: To get session data you need to use the SessionData singleton, and call getSessions. This will then set up all the data it can using that one request. If it is the first time making the request, it will actually use the network operation, otherwise it will use its stored data.

Call call = sessionData.getSessionData(new SimpleResponseHandler(){ blah blah blah });

You need to do this everytime you need to use session data, as there is no gurantee it will be set. This also returns a Call object. If you remove the acitiviy from the top of the stack before it finishes this network request it will execute the callback on the activity which is no longer in focus. This means that every request for a view will return a null result.

### The solution I came up with that is hacky and I don't really like:

I recently learned this is called a thunk pattern (amazing i implemented this without knowing that)

All network requests are made in the onResume() function. All calls generated by the network request are stored in an arrayList. When you navigate away before the network request is done it will be canceled. Calls are canceled in the onPause function.

This is a product of retrofit. I've googled around for better solutions but there is no way to keep track of active requests without writing a lot of overheard.

_____
Copyright Â© Yaseen Aniss 2023

All rights reserved. No part of this code may be reproduced, distributed, or transmitted in any form or by any means, including photocopying, recording, or other electronic or mechanical methods, without the prior written permission of the copyright owner, except in the case of brief quotations embodied in critical reviews and certain other noncommercial uses permitted by copyright law.

For permission requests, please contact anissyaseen@gmail.com

